<!DOCTYPE html>
<html>
<head>
    <title>Message Cost</title>
</head>
<body>

<h2>August Message Cost</h2>

<form>
    <label for="standardCharge">Enter cost per letter: </label>
    <input type="number" id="standardCharge" name="standardCharge" value="0.50" step="0.01"><br><br>

    <label for="discountLength">Enter the length needed for the discount: </label>
    <input type="number" id="discountLength" name="discountLength" value="20"><br><br>

    <label for="discountCharge">Enter the discount rate: </label>
    <input type="number" id="discountCharge" name="discountCharge" value="0.25" step="0.01"><br><br>

    <input type="button" value="Show total" onclick="amounts()">
</form>

<p id="results">Totals will appear here.</p>

<h3>Choose an Operation</h3>
<form>
    <input type="radio" id="op_product" name="operation" value="times" onclick="chooseOp()">
    <label for="op_product">Product</label><br>

    <input type="radio" id="op_sum" name="operation" value="add" onclick="chooseOp()">
    <label for="op_sum">Sum</label><br>

    <input type="radio" id="op_mod" name="operation" value="mod" onclick="chooseOp()">
    <label for="op_mod">Mod</label><br>
</form>

<p id="opResult">Operation result will appear here.</p>

<script>

function amounts() {
    console.log("Getting form values");
    
    let standardCharge = parseFloat(document.getElementById("standardCharge").value);
    let discountPosition = parseInt(document.getElementById("discountLength").value);
    let discountCharge = parseFloat(document.getElementById("discountCharge").value);

    let totalCosts = "";

    for (let size = discountPosition - 3; size <= discountPosition + 3; size++) {
        let totalCost = 0;

        if (size <= discountPosition) {
            totalCost = size * standardCharge;
        } else {
            totalCost = (discountPosition * standardCharge) + ((size - discountPosition) * discountCharge);
        }

        totalCosts += "length " + size + " is " + totalCost.toFixed(2) + "; ";
    }

    let out = document.getElementById("results");
    out.innerHTML = "Totals are: " + totalCosts;
}


// Part 6
function chooseOp() {
    // Get the input
    let price = parseFloat(document.getElementById("standardCharge").value);
    let breakAt = parseFloat(document.getElementById("discountLength").value);

    // what is checked
    let opElements = document.getElementsByName("operation");
    let operation = "";
    for (let i = 0; i < opElements.length; i++) {
        if (opElements[i].checked) {
            operation = opElements[i].value;
            break;
        }
    }

    let resultText = "";
    let resultValue;

    if (operation === "times") {
        resultValue = price * breakAt;
        resultText = `${price} * ${breakAt} is ${resultValue}`;
    } else if (operation === "add") {
        resultValue = price + breakAt;
        resultText = `${price} + ${breakAt} is ${resultValue}`;
    } else if (operation === "mod") {
        resultValue = price % breakAt;
        resultText = `${price} % ${breakAt} is ${resultValue}`;
    } else {
        resultText = "Please select an operation.";
    }

    document.getElementById("opResult").innerHTML = resultText;
}

</script>

</body>
</html>
